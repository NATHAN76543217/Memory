{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sebastienlecaille/programmation/web/memory/client/src/components/End/End.js\",\n    _s = $RefreshSig$();\n\nimport Button from '@material-ui/core/Button';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport API from '../../utils/API';\nimport ScoreList from \"../ScoreList/ScoreList.js\";\nimport \"./End.css\"; //get User data\n\nasync function getUser(setUser) {\n  await API.getUserInfo().then(res => res && setUser(res.data)).catch(setUser(\"null\"));\n}\n\nfunction End() {\n  _s();\n\n  //localstorage\n  const nb_card = localStorage.getItem(\"nb_pair\");\n  const res = localStorage.getItem(\"last\");\n  const time_elapsed = localStorage.getItem(\"time_elapsed\");\n  const pair_left = localStorage.getItem(\"pair_left\"); //Hook\n\n  const [user, setUser] = useState(null);\n  const [user_scores, setUserScores] = useState([\"-1\"]);\n  const [global_scores, setGlobalScores] = useState([\"-1\"]); //effect\n\n  useEffect(() => {\n    async function getScores() {\n      const scores = await API.getScores(\"user\", nb_card);\n      setUserScores(scores.user);\n      setGlobalScores(scores.global);\n    }\n\n    getScores();\n  }, [nb_card]);\n  !user && getUser(setUser); //render\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"end\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: res === \"win\" ? \"You Win!\" : \"You loose...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), user && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"V \", user.victories, \" | \", user.defeats, \" D\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 26\n      }, this), res === \"win\" && /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"You flipped all the \", nb_card, \" pairs!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"in \", time_elapsed, \" seconds\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this), res === \"loose\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"You have \", pair_left, \" pairs left :(\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: \"/game\",\n            data: nb_card\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            variant: \"contained\",\n            block: true,\n            children: \"Retry?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"scores\",\n          children: /*#__PURE__*/_jsxDEV(ScoreList, {\n            user_scores: user_scores,\n            global_scores: global_scores\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: () => window.location = \"/menu\",\n          block: true,\n          children: \"Return to Menu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 3\n  }, this);\n}\n\n_s(End, \"/gnxwRKKLhjdmhK4/8CBpycEiFU=\");\n\n_c = End;\nexport default End;\n\nvar _c;\n\n$RefreshReg$(_c, \"End\");","map":{"version":3,"sources":["/Users/sebastienlecaille/programmation/web/memory/client/src/components/End/End.js"],"names":["Button","React","useState","useEffect","Link","API","ScoreList","getUser","setUser","getUserInfo","then","res","data","catch","End","nb_card","localStorage","getItem","time_elapsed","pair_left","user","user_scores","setUserScores","global_scores","setGlobalScores","getScores","scores","global","victories","defeats","pathname","window","location"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button'\nimport React from 'react';\nimport {useState, useEffect} from 'react'\nimport {Link} from 'react-router-dom';\nimport API from '../../utils/API';\nimport ScoreList from \"../ScoreList/ScoreList.js\";\nimport \"./End.css\";\n\n//get User data\nasync function getUser(setUser)\n{\n    await API.getUserInfo().then((res) => (res && setUser(res.data))).catch(setUser(\"null\"));\n}\n\nfunction End()\n{\n    //localstorage\n    const nb_card   = localStorage.getItem(\"nb_pair\");\n    const res       = localStorage.getItem(\"last\");\n    const time_elapsed = localStorage.getItem(\"time_elapsed\");\n    const pair_left = localStorage.getItem(\"pair_left\");\n    \n    //Hook\n    const [user, setUser] = useState(null);\n\tconst [user_scores, setUserScores] = useState([\"-1\"]);\n\tconst [global_scores, setGlobalScores] = useState([\"-1\"]);\n    //effect\n    useEffect(() => {\n\t\tasync function getScores() {\n\t\t\tconst scores = await API.getScores(\"user\", nb_card);\n\t\t\tsetUserScores(scores.user);\n\t\t\tsetGlobalScores(scores.global);\n        }\n        getScores();\n     }, [nb_card]);\n    (!user && getUser(setUser));\n    \n    //render\n    return (\n\t\t<div class=\"end\">\n            <div class=\"inner\">\n                <h1>{(res === \"win\" ? \"You Win!\" : \"You loose...\" )}</h1>\n                {user && <span>V {user.victories} | {user.defeats} D</span>}\n                {res === \"win\" &&\n                    <React.Fragment>\n                        <span>You flipped all the {nb_card} pairs!</span>\n                        <span>in {time_elapsed} seconds</span>\n                    </React.Fragment>}\n                {res === \"loose\" && <span>You have {pair_left} pairs left :(</span>}\n                <div class=\"content\">\n                    <Link to={{\n                    pathname: \"/game\",\n                    data: nb_card, }}>\n                        <Button color=\"primary\" variant=\"contained\" block>Retry?</Button>\n                    </Link>\n                    <div class=\"scores\">\n                        <ScoreList user_scores={user_scores} global_scores={global_scores}/>\n                    </div>\n                    <Button color=\"primary\" variant=\"contained\" onClick={() => window.location = \"/menu\"} block>Return to Menu</Button>\n                </div>\n            </div>\n\t\t</div>);\n}\nexport default End;\n"]},"metadata":{},"sourceType":"module"}