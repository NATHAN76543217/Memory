{"ast":null,"code":"import axios from \"axios\";\nconst headers = {\n  \"Content-Type\": \"application/json\"\n};\nconst burl = \"http://localhost:8800\";\n\nfunction login(name, password) {\n  //create a POST http request\n  return axios.post(`${burl}/login`, {\n    name,\n    password\n  }, {\n    headers: headers\n  }).catch(function (error) {\n    if (error.response) console.log(error.response.status);\n    return null;\n  });\n}\n\nfunction signup(send) {\n  return axios.post(`${burl}/signup`, send, {\n    headers: headers\n  });\n}\n\nfunction isAuth() {\n  console.log(\"in Auth: \" + localStorage.getItem(\"token\"));\n  const ret = localStorage.getItem(\"token\") !== null;\n  console.log(\"IsAuth: \" + ret);\n  return ret;\n}\n\nfunction logout() {\n  localStorage.clear();\n}\n\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nfunction getUserInfo() {\n  console.log(\"get user data start\");\n  this.logout();\n\n  if (this.isAuth) {\n    console.log(\"Is log: true\");\n    let tk = this.getToken();\n    console.log(\"tk: \" + tk);\n    return axios.put(`${burl}/info`, {\n      token: tk\n    }, {\n      headers: headers\n    });\n  }\n\n  return null;\n}\n\nconst API = {\n  signup,\n  login,\n  logout,\n  isAuth,\n  getToken,\n  getUserInfo\n};\nexport default API;","map":{"version":3,"sources":["/Users/sebastienlecaille/programmation/web/memory/client/src/utils/API.js"],"names":["axios","headers","burl","login","name","password","post","catch","error","response","console","log","status","signup","send","isAuth","localStorage","getItem","ret","logout","clear","getToken","getUserInfo","tk","put","token","API"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,OAAO,GAAG;AACf,kBAAgB;AADD,CAAhB;AAGA,MAAMC,IAAI,GAAG,uBAAb;;AAEA,SAASC,KAAT,CAAeC,IAAf,EAAqBC,QAArB,EAA+B;AAC9B;AACA,SAAOL,KAAK,CAACM,IAAN,CACL,GAAEJ,IAAK,QADF,EAEN;AACCE,IAAAA,IADD;AAECC,IAAAA;AAFD,GAFM,EAMN;AACCJ,IAAAA,OAAO,EAAEA;AADV,GANM,EASLM,KATK,CASC,UAAUC,KAAV,EACR;AACC,QAAIA,KAAK,CAACC,QAAV,EACCC,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACC,QAAN,CAAeG,MAA3B;AACD,WAAO,IAAP;AACA,GAdM,CAAP;AAeA;;AACD,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AACrB,SAAOd,KAAK,CAACM,IAAN,CAAY,GAAEJ,IAAK,SAAnB,EAA6BY,IAA7B,EAAmC;AAAEb,IAAAA,OAAO,EAAEA;AAAX,GAAnC,CAAP;AACA;;AAED,SAASc,MAAT,GAAkB;AACjBL,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAcK,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA1B;AACA,QAAMC,GAAG,GAAGF,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAkC,IAA9C;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAaO,GAAzB;AACA,SAAOA,GAAP;AACA;;AACD,SAASC,MAAT,GAAkB;AACjBH,EAAAA,YAAY,CAACI,KAAb;AACA;;AACD,SAASC,QAAT,GAAoB;AACnB,SAAOL,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAP;AACA;;AACD,SAASK,WAAT,GAAuB;AACtBZ,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,OAAKQ,MAAL;;AACA,MAAI,KAAKJ,MAAT,EAAgB;AACfL,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,QAAIY,EAAE,GAAG,KAAKF,QAAL,EAAT;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAY,SAASY,EAArB;AACA,WAAOvB,KAAK,CAACwB,GAAN,CAAW,GAAEtB,IAAK,OAAlB,EAA0B;AAACuB,MAAAA,KAAK,EAAEF;AAAR,KAA1B,EAAuC;AAACtB,MAAAA,OAAO,EAAEA;AAAV,KAAvC,CAAP;AACA;;AACD,SAAO,IAAP;AACA;;AACD,MAAMyB,GAAG,GAAG;AACXb,EAAAA,MADW;AAEXV,EAAAA,KAFW;AAGXgB,EAAAA,MAHW;AAIXJ,EAAAA,MAJW;AAKXM,EAAAA,QALW;AAMXC,EAAAA;AANW,CAAZ;AAQA,eAAeI,GAAf","sourcesContent":["\nimport axios from \"axios\";\nconst headers = {\n\t\"Content-Type\": \"application/json\"\n};\nconst burl = \"http://localhost:8800\";\n\nfunction login(name, password) {\n\t//create a POST http request\n\treturn axios.post(\n\t\t`${burl}/login`,\n\t\t{\n\t\t\tname,\n\t\t\tpassword\n\t\t},\n\t\t{\n\t\t\theaders: headers\n\t\t}\n\t).catch(function (error)\n\t{\n\t\tif (error.response)\n\t\t\tconsole.log(error.response.status);\n\t\treturn null;\n\t});\n}\nfunction signup(send) {\n\treturn axios.post(`${burl}/signup`, send, { headers: headers });\n}\n\nfunction isAuth() {\n\tconsole.log(\"in Auth: \" + localStorage.getItem(\"token\"));\n\tconst ret = localStorage.getItem(\"token\") !== null ;\n\tconsole.log(\"IsAuth: \" + ret);\n\treturn ret;\n}\nfunction logout() {\n\tlocalStorage.clear();\n}\nfunction getToken() {\n\treturn localStorage.getItem(\"token\");\n}\nfunction getUserInfo() {\n\tconsole.log(\"get user data start\");\n\tthis.logout();\n\tif (this.isAuth){\n\t\tconsole.log(\"Is log: true\");\n\t\tlet tk = this.getToken();\n\t\tconsole.log(\"tk: \" + tk);\n\t\treturn axios.put(`${burl}/info`, {token: tk}, {headers: headers});\n\t}\n\treturn null;\n}\nconst API = {\n\tsignup,\n\tlogin,\n\tlogout,\n\tisAuth,\n\tgetToken,\n\tgetUserInfo,\n}\nexport default API;\n\t"]},"metadata":{},"sourceType":"module"}